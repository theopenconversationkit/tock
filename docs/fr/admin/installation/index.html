



<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Pour construire aisément vos prochains bots">
      
      
        <link rel="canonical" href="https://voyages-sncf-technologies.github.io/tock/fr/admin/installation/">
      
      
        <meta name="author" content="VSCT">
      
      
        <meta name="lang:clipboard.copy" content="Copier dans le presse-papier">
      
        <meta name="lang:clipboard.copied" content="Copié dans le presse-papier">
      
        <meta name="lang:search.language" content="fr">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="Aucun document trouvé">
      
        <meta name="lang:search.result.one" content="1 document trouvé">
      
        <meta name="lang:search.result.other" content="# documents trouvés">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.2">
    
    
      
        <title>Installation - Tock</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#installation-tock" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://voyages-sncf-technologies.github.io/tock/fr" title="Tock" class="md-header-nav__button md-logo">
          
            <img src="../../assets/images/logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Tock
            </span>
            <span class="md-header-nav__topic">
              
                Installation
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Taper pour démarrer la recherche
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/voyages-sncf-technologies/tock" title="Aller au dépôt" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    tock
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://voyages-sncf-technologies.github.io/tock/fr" title="Tock" class="md-nav__button md-logo">
      
        <img src="../../assets/images/logo.svg" width="48" height="48">
      
    </a>
    Tock
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/voyages-sncf-technologies/tock" title="Aller au dépôt" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    tock
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Vue d`ensemble" class="md-nav__link">
      Vue d`ensemble
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../toc/" title="Table des matières" class="md-nav__link">
      Table des matières
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Découvrir Tock
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Découvrir Tock
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/studio/" title="Créer son premier bot" class="md-nav__link">
      Créer son premier bot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/slack/" title="Configurer Slack" class="md-nav__link">
      Configurer Slack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/messenger/" title="Configurer Messenger" class="md-nav__link">
      Configurer Messenger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/api/" title="Programmer des parcours" class="md-nav__link">
      Programmer des parcours
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/plateforme/" title="Déployer avec Docker" class="md-nav__link">
      Déployer avec Docker
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Utiliser Tock
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Utiliser Tock
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../utilisateur/concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../utilisateur/studio/" title="Tock Studio" class="md-nav__link">
      Tock Studio
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../utilisateur/canaux/" title="Bot multicanal" class="md-nav__link">
      Bot multicanal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../utilisateur/i18n/" title="Bot multilingue" class="md-nav__link">
      Bot multilingue
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Développer avec Tock
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Développer avec Tock
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/modes/" title="Modes disponibles" class="md-nav__link">
      Modes disponibles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/bot-api/" title="Tock Bot API" class="md-nav__link">
      Tock Bot API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/bot-integre/" title="Tock Bot intégré" class="md-nav__link">
      Tock Bot intégré
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/connecteurs/" title="Connecteurs" class="md-nav__link">
      Connecteurs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/i18n/" title="i18n" class="md-nav__link">
      i18n
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/api/" title="Liste des APIs" class="md-nav__link">
      Liste des APIs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/exemples-code/" title="Exemples de code" class="md-nav__link">
      Exemples de code
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Administrer Tock
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Administrer Tock
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Installation
      </label>
    
    <a href="./" title="Installation" class="md-nav__link md-nav__link--active">
      Installation
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table des matières</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation-avec-docker" class="md-nav__link">
    Installation avec Docker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#base-de-donnees-mongodb" class="md-nav__link">
    Base de données MongoDB
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#composants-applicatifs" class="md-nav__link">
    Composants applicatifs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exposition-reseau" class="md-nav__link">
    Exposition réseau
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxies-http" class="md-nav__link">
    Proxies HTTP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packaging-du-bot" class="md-nav__link">
    Packaging du bot
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configurations-minimales" class="md-nav__link">
    Configurations minimales
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#construction-des-modeles" class="md-nav__link">
    Construction des modèles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memoire-jvm" class="md-nav__link">
    Mémoire JVM
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parametrage-fonctionnel" class="md-nav__link">
    Paramétrage fonctionnel
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#selection-du-moteur-nlu" class="md-nav__link">
    Sélection du moteur NLU
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#voir-aussi" class="md-nav__link">
    Voir aussi...
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../securite/" title="Sécurité" class="md-nav__link">
      Sécurité
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../disponibilite/" title="Disponibilité" class="md-nav__link">
      Disponibilité
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../supervision/" title="Supervision" class="md-nav__link">
      Supervision
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cloud/" title="Cloud" class="md-nav__link">
      Cloud
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      A propos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        A propos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/pourquoi/" title="Pourquoi Tock" class="md-nav__link">
      Pourquoi Tock
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/vitrine/" title="Vitrine utilisateurs" class="md-nav__link">
      Vitrine utilisateurs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/ressources/" title="Ressources" class="md-nav__link">
      Ressources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/contact/" title="Nous contacter" class="md-nav__link">
      Nous contacter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/communaute/" title="Communauté" class="md-nav__link">
      Communauté
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/contribuer/" title="Contribuer" class="md-nav__link">
      Contribuer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/emploi/" title="Emploi" class="md-nav__link">
      Emploi
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table des matières</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation-avec-docker" class="md-nav__link">
    Installation avec Docker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#base-de-donnees-mongodb" class="md-nav__link">
    Base de données MongoDB
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#composants-applicatifs" class="md-nav__link">
    Composants applicatifs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exposition-reseau" class="md-nav__link">
    Exposition réseau
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxies-http" class="md-nav__link">
    Proxies HTTP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packaging-du-bot" class="md-nav__link">
    Packaging du bot
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configurations-minimales" class="md-nav__link">
    Configurations minimales
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#construction-des-modeles" class="md-nav__link">
    Construction des modèles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memoire-jvm" class="md-nav__link">
    Mémoire JVM
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parametrage-fonctionnel" class="md-nav__link">
    Paramétrage fonctionnel
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#selection-du-moteur-nlu" class="md-nav__link">
    Sélection du moteur NLU
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#voir-aussi" class="md-nav__link">
    Voir aussi...
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="installation-tock">Installation Tock<a class="headerlink" href="#installation-tock" title="Permanent link">&para;</a></h1>
<p>La page <a href="../architecture/">architecture</a> présente l'architecture fonctionnelle et technique Tock, le rôle des différents 
composants ainsi que les différents modes de déploiement.</p>
<p>Ce chapitre présente les différentes options d'installation de Tock. En particulier, il s'agit d'évoquer le cas d'une 
installation en production ainsi que partager quelques retours d'expérience sur les performances, la résilience, 
la capacité de Tock à monter en charge, les déploiementsde type <em>Cloud</em>, la supervision, etc.</p>
<blockquote>
<p>Si vous cherchez seulement à tester Tock avec des données non sensibles, vous pouvez préférer utiliser la 
<a href="https://demo.tock.ai">plateforme de démonstration Tock</a>.</p>
</blockquote>
<h2 id="installation-avec-docker">Installation avec Docker<a class="headerlink" href="#installation-avec-docker" title="Permanent link">&para;</a></h2>
<p>Les informations ci-dessous concernent l'installation avec <a href="https://www.docker.com/">Docker</a>. En analysant les descripteurs 
Docker et <a href="https://docs.docker.com/compose/">Docker Compose</a> fournis 
(les <code>Dockerfile</code> et <code>docker-compose.yml</code>) on peut facilement concevoir une installation sans Docker.</p>
<p>Tock est composé par défaut de plusieurs conteneurs/images dockers et d'une base de donnée <a href="https://www.mongodb.com">MongoDB</a>.</p>
<blockquote>
<p>Le guide <a href="../../guide/plateforme/">déployer Tock avec Docker</a> dans la section <em>Découvrir Tock</em> donne un exemple de déploiement 
d'une plateforme complète en quelques minutes avec une empreinte minimale en utilisant Docker et Docker Compose. 
Cependant, cette méthode n'est pas envisageable pour un déploiement pérenne comme une plateforme de production.</p>
</blockquote>
<p>Si vous souhaitez utiliser Docker Compose en production, merci de lire cet <a href="https://docs.docker.com/compose/production/">article</a> 
et de revoir la configuration, qui est uniquement donnée dans le projet <code>tock-docker</code> à titre d'exemple. 
En particulier, la configuration des instances MongoDB doit être revue attentivement.</p>
<h2 id="base-de-donnees-mongodb">Base de données MongoDB<a class="headerlink" href="#base-de-donnees-mongodb" title="Permanent link">&para;</a></h2>
<p>La base Mongo devant être configurée en <em>replica set</em>, c'est à dire avec au minimum 3 instances déployées.</p>
<blockquote>
<p>Un <a href="https://docs.mongodb.com/manual/tutorial/deploy-replica-set/">tutoriel d'installation en <em>replica set</em></a>
 est disponible sur le site de MongoDB.</p>
</blockquote>
<h2 id="composants-applicatifs">Composants applicatifs<a class="headerlink" href="#composants-applicatifs" title="Permanent link">&para;</a></h2>
<p>Selon les composants applicatifs de Tock, obligatoires ou facultatifs, certains doivent être <em>mono-instance</em> et d'autres 
peuvent être déployés en <em>plusieurs instances</em> (voir la section <a href="../disponibilite/">haute disponibilité</a> pour en savoir plus).</p>
<p>Pour plus de commodité, les composants ci-dessous sont nommé comme les images <a href="https://www.docker.com/">Docker</a> fournies 
avec Tock, bien que l'utilisation de Docker ne soit pas obligatoire pour installer Tock.</p>
<h3 id="exposition-reseau">Exposition réseau<a class="headerlink" href="#exposition-reseau" title="Permanent link">&para;</a></h3>
<p>Par défaut, les composants ou <em>conteneurs</em> de la plateforme Tock ne doivent pas être exposés à l'extérieur du 
<a href="https://fr.wikipedia.org/wiki/R%C3%A9seau_priv%C3%A9_virtuel"><em>VPN</em></a> ou <a href="https://fr.wikipedia.org/wiki/Nuage_Priv%C3%A9_Virtuel"><em>VPC</em></a>. 
Seul le bot lui-même doit être accessible des partenaires et canaux externes auxquels on veut 
s'intégrer, pour le fonctionnement des <em>WebHooks</em>.</p>
<table>
<thead>
<tr>
<th>Composant / Image</th>
<th>Exposition réseau</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://hub.docker.com/r/tock/bot_admin"><code>tock/bot_admin</code></a></td>
<td>VPN / VPC uniquement</td>
<td>Interfaces et outils <em>Tock Studio</em></td>
</tr>
<tr>
<td><a href="https://hub.docker.com/r/tock/build_worker"><code>tock/build_worker</code></a></td>
<td>VPN / VPC uniquement</td>
<td>Reconstruit les modèles automatiquement dès que nécessaire</td>
</tr>
<tr>
<td><a href="https://hub.docker.com/r/tock/duckling"><code>tock/duckling</code></a></td>
<td>VPN / VPC uniquement</td>
<td>Analyse les dates et types primitifs en utilisant <a href="https://duckling.wit.ai">Duckling</a></td>
</tr>
<tr>
<td><a href="https://hub.docker.com/r/tock/nlp_api"><code>tock/nlp_api</code></a></td>
<td>VPN / VPC uniquement</td>
<td>Analyse les phrases à partir des modèles construits dans <em>Tock Studio</em></td>
</tr>
<tr>
<td><a href="https://hub.docker.com/r/tock/bot_api"><code>tock/bot_api</code></a></td>
<td>VPN / VPC uniquement</td>
<td>API pour développer des bots (mode <a href="../../dev/bot-api/"><em>Tock Bot API</em></a>)</td>
</tr>
<tr>
<td><a href="https://hub.docker.com/r/tock/kotlin_compiler"><code>tock/kotlin_compiler</code></a></td>
<td>VPN / VPC uniquement</td>
<td>(Facultatif) Compilateur de scripts pour les saisir directement dans l'interface <a href="../../utilisateur/studio/build/"><em>Build</em></a> de <em>Tock Studio</em></td>
</tr>
<tr>
<td>bot (non fourni)</td>
<td>Internet / partenaires</td>
<td>Le bot lui-même, implémentant les parcours programmatiques, accessible des partenaires/canaux externes via des <em>WebHooks</em></td>
</tr>
</tbody>
</table>
<p>Bien sûr, l'implémentation du bot lui-même n'est pas fournie avec Tock (chacun implémente ses fonctionnalités propres pour son besoin).</p>
<h3 id="proxies-http">Proxies HTTP<a class="headerlink" href="#proxies-http" title="Permanent link">&para;</a></h3>
<p>Les <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/net/proxies.html">propriétés système Java</a>
<code>https.proxyHost</code>, <code>http.proxyHost</code> et <code>http.nonProxyHosts</code> sont la méthode recommandée pour configurer un proxy.</p>
<h3 id="packaging-du-bot">Packaging du bot<a class="headerlink" href="#packaging-du-bot" title="Permanent link">&para;</a></h3>
<p>Un exemple de bot en mode <a href="../../dev/bot-integre/"><em>Tock Bot intégré</em></a> est disponible dans 
<a href="https://github.com/theopenconversationkit/tock-docker/blob/master/docker-compose-bot-open-data.yml"><code>docker-compose-bot-open-data.yml</code></a>.</p>
<p>Des exemples et indications pour packager des bots en mode <a href="../../dev/bot-api/"><em>Tock Bot API</em></a> (<em>WebHooks</em>, <em>WebSockets</em>) seront bientôt disponibles.</p>
<h2 id="configurations-minimales">Configurations minimales<a class="headerlink" href="#configurations-minimales" title="Permanent link">&para;</a></h2>
<p>Le paramètre principal à surveiller est la mémoire vive disponible.</p>
<h3 id="construction-des-modeles">Construction des modèles<a class="headerlink" href="#construction-des-modeles" title="Permanent link">&para;</a></h3>
<p>En particulier, plus vos modèles sont importants, plus il est nécessaire d'augmenter la mémoire pour reconstruire les modèles
(composant <code>tock/build_worker</code>).</p>
<p>Pour donner un ordre de grandeur, un modèle de 50000 phrases avec plusieurs intentions, comportant une vingtaine d'entités,
nécessitera de provisionner environ 8 Go de RAM pour le composant <code>tock/build_worker</code>.</p>
<p>Cependant, des modèles importants mais contenant peu d'entités fonctionnent facilement avec seulement 1 Go de RAM.</p>
<h3 id="memoire-jvm">Mémoire JVM<a class="headerlink" href="#memoire-jvm" title="Permanent link">&para;</a></h3>
<p>Pour garantir que les conteneurs/instances Docker ne dépassent pas la mémoire disponible, il est recommandé
de limiter la mémoire des JVMs en suivant l'exemple suivant :</p>
<div class="codehilite"><pre><span></span><span class="n">JAVA_ARGS</span><span class="o">=-</span><span class="n">Xmx1g</span> <span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="n">MaxMetaspaceSize</span><span class="o">=</span><span class="mi">256</span><span class="n">m</span>
</pre></div>


<h2 id="parametrage-fonctionnel">Paramétrage fonctionnel<a class="headerlink" href="#parametrage-fonctionnel" title="Permanent link">&para;</a></h2>
<h3 id="selection-du-moteur-nlu">Sélection du moteur NLU<a class="headerlink" href="#selection-du-moteur-nlu" title="Permanent link">&para;</a></h3>
<blockquote>
<p>TODO : documenter comment utiliser <a href="https://opennlp.apache.org/">OpenNLP</a> (par défaut), <a href="https://stanfordnlp.github.io/CoreNLP/">Stanford CoreNLP</a>
ou autre.</p>
</blockquote>
<h2 id="voir-aussi">Voir aussi...<a class="headerlink" href="#voir-aussi" title="Permanent link">&para;</a></h2>
<p>Pour une utilisation de Tock en production, nous vous recommandons de parcourir également les pages suivantes :</p>
<ul>
<li><a href="../securite/">Sécurité</a></li>
<li><a href="../supervision/">Supervision</a></li>
<li><a href="../cloud/">Cloud</a></li>
<li><a href="../disponibilite/">Haute disponibilité</a></li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../architecture/" title="Architecture" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Précédent
                </span>
                Architecture
              </span>
            </div>
          </a>
        
        
          <a href="../securite/" title="Sécurité" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Suivant
                </span>
                Sécurité
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017/2019 VSCT
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/voyages-sncf-technologies/tock" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c648116f.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../../assets/javascripts/lunr/lunr.fr.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>