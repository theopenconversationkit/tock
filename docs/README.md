# Tock documentation 

## How to generate website

##### Using pyenv && poetry (recommended)

It's recommended to use pyenv, see install and usage guide here:
https://gist.github.com/trongnghia203/9cc8157acb1a9faad2de95c3175aa875

Basic usage to create a venv with a specific version of Python for this project :

```sh
# In docs folder
pyenv install 3.13.9
pyenv local 3.13.9
which python # Check that you use the python version installed by pyenv
python --version # Check your python version
python -m venv .venv # Create a virtual env based on this python version
source .venv/bin/activate # Activate your virtual env
pip install -r  requirements.txt # install dependencies
mkdocs serve # Generate on default port 
mkdocs serve --dev-addr 127.0.0.1:8182 # To generate the website on the port you want 
```

## Actions / Workflows 

This project uses GitHub Actions to deploy and clean up branches :


The project automatically deploys the MkDocs documentation to GitHub Pages when a push is made to certain branches. It proceeds as follows:


- Trigger: PUSH
- Retrieve the code from the relevant branch.
- Retrieve the artifact from the last successful build (if it exists).
- Install MkDocs dependencies.
- Compile the MkDocs site in docs/site/.
- Upload the generated site as an artifact. In GitHub Actions, an artifact is a file or folder generated by a workflow and stored for later reuse. 
- Here, it contains the content necessary for deployment.
- Deploy to GitHub Pages.
- Update the deployment URL based on the branch.
- Add a comment in the PR (if applicable) with the link to the deployed site.

Then, if you want to close a PR or simply remove a folder from your artifact:

- Trigger: PR closure or manual launch via workflow_dispatch (by selecting the branch)
- Retrieve the repository.
- Retrieve the artifact containing the MkDocs files.
- Check the content of the artifact.
- Delete the folder associated with the closed branch.
- Upload the updated files.
- Add a comment in the PR to indicate the success of the cleanup.



