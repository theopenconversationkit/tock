<!--
  ~ Copyright (C) 2017/2021 e-voyageurs technologies
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="d-flex flex-wrap mt-3 mb-2">
  <h1 class="flex-grow-1">Rag sources</h1>

  <div class="d-flex align-items-center">
    <button
      nbButton
      status="primary"
      size="medium"
      [disabled]="!configurations?.length"
      (click)="addSource()"
    >
      <nb-icon icon="plus-outline"></nb-icon>
      NEW SOURCE
    </button>
  </div>
</div>

<section>
  <nb-alert
    *ngIf="configurations?.length === 0"
    class="alert-config flex-row align-items-center"
    accent="warning"
  >
    <nb-icon
      class="mr-1"
      icon="alert-triangle-outline"
      status="warning"
    ></nb-icon>
    No bot configuration detected
  </nb-alert>

  <div *ngIf="configurations?.length && sources?.length">
    <tock-no-data-found
      *ngIf="!sources.length"
      title="No Source found"
      message="You may create a new one using above button &#34;NEW SOURCE&#34;."
    ></tock-no-data-found>

    <ng-container *ngFor="let source of sources">
      <tock-source-entry
        [source]="source"
        (onEdit)="editSource($event)"
        (onDelete)="deleteSource($event)"
        (onUpdate)="updateSource($event)"
        (onToggleEnabled)="toggleEnabledSource($event)"
        (onDeleteIndexingSession)="deleteIndexingSession($event)"
        (onSetIndexingSessionAsCurrent)="setIndexingSessionAsCurrent($event)"
      ></tock-source-entry>
    </ng-container>
  </div>
</section>
