<!--
  ~ Copyright (C) 2017/2022 e-voyageurs technologies
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<h6 class="tock-toggleable mb-1" [ngClass]="cssState">{{item.title}}</h6>
<div class="d-flex w-100 justify-content-between">
  <div class="pb-2 d-flex align-items-center">
    <small class="mr-1">
      {{ item.utterances.length }} Question{{ item.utterances.length === 1 ? '' : 's' }}
    </small>
  </div>

  <div class="tock-tags-box pb-2">
    <nb-tag-list>
      <nb-tag
        *ngFor="let tag of item.tags"
        class="mb-0"
        appearance="outline"
        size="small"
        [text]="tag"
        [removable]="false"
      >
      </nb-tag>
    </nb-tag-list>
  </div>
</div>
<nb-card [ngClass]="['overflow-hidden', 'mb-2', 'tock-toggleable', cssState]">
  <nb-card-body>
    <div class="row">
      <div class="col mt-2 mb-2">
        <small class="d-block text-muted">First question</small>
        {{ getFirstUtterance() }}
      </div>

      <div class="col mt-2 mb-2">
        <small class="d-block text-muted">Answer</small>
        {{ item.answer }}
      </div>

      <div class="col-lg-auto mt-2 mb-2 d-flex align-items-center">
        <nb-toggle
          nbTooltip="Disable"
          status="basic"
          [ngModel]="item.enabled"
          (mousedown)="toggleEnabled($event)"
        ></nb-toggle>

        <button
          nbButton
          nbTooltip="Edit"
          class="tock-action tock--subtle-hover text-muted"
          ghost
          status="secondary"
          (click)="edit()"
        >
          <nb-icon icon="edit-outline"></nb-icon>
        </button>

        <button
          nbButton
          nbTooltip="Download"
          class="tock-action tock--subtle-hover text-muted"
          ghost
          status="secondary"
          (click)="download()"
        >
          <nb-icon icon="download-outline"></nb-icon>
        </button>

        <button
          nbButton
          nbTooltip="Delete"
          class="tock-action tock--subtle-hover text-muted"
          ghost
          status="secondary"
          (click)="remove()"
        >
          <nb-icon icon="trash-2-outline"></nb-icon>
        </button>
      </div>
    </div>
  </nb-card-body>
</nb-card>
